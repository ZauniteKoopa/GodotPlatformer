[gd_scene load_steps=13 format=3 uid="uid://dh3qn6y4att5h"]

[ext_resource type="Script" path="res://Scripts/PlatformerPackage3D.gd" id="1_3ylhl"]
[ext_resource type="Script" path="res://Scripts/CameraSystem.gd" id="2_ydapg"]
[ext_resource type="AudioStream" uid="uid://d2fdowpk0k2ui" path="res://Audio/Player_Jump.wav" id="3_5cp4s"]
[ext_resource type="AudioStream" uid="uid://c4cfp564qe7be" path="res://Audio/Player_Land.wav" id="4_ui6ct"]

[sub_resource type="BoxShape3D" id="BoxShape3D_1ec5k"]
size = Vector3(0.8, 0.180371, 0.8)

[sub_resource type="BoxShape3D" id="BoxShape3D_yxglf"]

[sub_resource type="BoxMesh" id="BoxMesh_b56rl"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_70anq"]
albedo_color = Color(0, 0.776471, 0.156863, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_e8lsg"]
albedo_color = Color(0, 0, 0, 1)
disable_receive_shadows = true

[sub_resource type="CylinderMesh" id="CylinderMesh_mv0lw"]
material = SubResource("StandardMaterial3D_e8lsg")
top_radius = 0.7
bottom_radius = 0.7
height = 0.05

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_86le5"]
albedo_color = Color(0.505882, 0.278431, 0.101961, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_i8aj4"]
size = Vector3(10, 1, 10)

[node name="TestLab" type="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0248103, 0.0438733, -0.0368707)

[node name="PlatformerPackage3D" type="PlatformerPackage3D" parent="."]
walking_speed = 5.0
walking_air_reduction = 0.5
camera_node_path = NodePath("CameraSystem/SpringArm3D/PlayerCamera")
character_body_path = NodePath("CollisionShape3D")
player_feet_path = NodePath("PlatformerFeetSensor")
long_jump_height = 2.5
short_jump_height = 1.0
player_gravity = 18.0
gravity_apex_modifier = 0.75
apex_speed_definition = 0.75
jump_buffer_duration = 0.1
transform = Transform3D(0.999844, 0, 0.0176444, 0, 1, 0, -0.0176444, 0, 0.999844, 0.0619726, 0.5, 0)
collision_layer = 2
collision_mask = 3
velocity = Vector3(0, -10, 0)
floor_max_angle = 0.872665
safe_margin = 0.01
script = ExtResource("1_3ylhl")

[node name="CameraSystem" type="Node3D" parent="PlatformerPackage3D"]
transform = Transform3D(0.965017, -0.0620964, 0.25473, 0, 0.971549, 0.236838, -0.262189, -0.228553, 0.937562, 0.0163549, 0.498002, 0.000288617)
script = ExtResource("2_ydapg")

[node name="SpringArm3D" type="SpringArm3D" parent="PlatformerPackage3D/CameraSystem"]
transform = Transform3D(1, 0, 0, 0, 0.999999, 0, 0, 0, 0.999999, 3.37604e-09, 0.661284, -1.11759e-08)
collision_mask = 7
spring_length = 4.0

[node name="PlayerCamera" type="Camera3D" parent="PlatformerPackage3D/CameraSystem/SpringArm3D"]
transform = Transform3D(1, -4.65662e-10, -8.32667e-17, 4.65661e-10, 1, 8.94069e-08, 0, -8.9407e-08, 1, -1.11759e-08, 1.19209e-07, 4.85626)
rotation_edit_mode = 2
fov = 62.3

[node name="PlatformerFeetSensor" type="PlatformerFeetSensor" parent="PlatformerPackage3D"]
coyote_time_duration = 0.2
floor_max_angle = 50.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="PlatformerPackage3D/PlatformerFeetSensor"]
transform = Transform3D(1, 0, -1.67638e-08, 0, 1, 0, 1.67638e-08, 0, 1, 0, -0.590186, 0)
shape = SubResource("BoxShape3D_1ec5k")

[node name="CollisionShape3D" type="CollisionShape3D" parent="PlatformerPackage3D"]
shape = SubResource("BoxShape3D_yxglf")

[node name="MeshInstance3D" type="MeshInstance3D" parent="PlatformerPackage3D/CollisionShape3D"]
transform = Transform3D(1, 0, 1.86265e-09, 0, 1, 0, -1.86265e-09, 0, 1, 0, 0, 0)
mesh = SubResource("BoxMesh_b56rl")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_70anq")

[node name="AudioCenter" type="Node3D" parent="PlatformerPackage3D"]

[node name="PlayerJumpSpeaker" type="AudioStreamPlayer3D" parent="PlatformerPackage3D/AudioCenter"]
transform = Transform3D(1, 0, -3.72529e-09, 0, 1, 0, 1.86265e-09, 0, 1, 0, 0, 0)
stream = ExtResource("3_5cp4s")
volume_db = -16.2

[node name="PlayerLandSpeaker" type="AudioStreamPlayer3D" parent="PlatformerPackage3D/AudioCenter"]
transform = Transform3D(1, 0, -1.86265e-09, 0, 1, 0, 1.86265e-09, 0, 1, -0.0177902, -0.0725532, 0.0626138)
stream = ExtResource("4_ui6ct")
volume_db = -10.0

[node name="SpotShadow" type="SpotShadow" parent="PlatformerPackage3D"]
max_shadow_scale = 1.2
shadow_mesh_path = NodePath("ShadowMesh")
transform = Transform3D(1, -3.72529e-09, 5.55112e-17, 0, -4.37114e-08, -1, 3.72529e-09, 1, -4.37114e-08, 0, 0, 0)
spring_length = 6.0

[node name="ShadowMesh" type="MeshInstance3D" parent="PlatformerPackage3D/SpotShadow"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 6)
mesh = SubResource("CylinderMesh_mv0lw")
skeleton = NodePath("")

[node name="StaticBody3D" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00563049, -1.01921, 0.0124369)
disable_mode = 2
collision_mask = 3

[node name="Floor" type="CSGBox3D" parent="StaticBody3D"]
size = Vector3(10, 1, 10)
material = SubResource("StandardMaterial3D_86le5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("BoxShape3D_i8aj4")

[node name="StaticBody3D2" type="StaticBody3D" parent="."]
transform = Transform3D(4.98097, 0.435779, 0, -0.435746, 4.9806, -0.061085, -0.00532391, 0.0608526, 4.99963, 26.9207, -1.3945, -5.90321)
disable_mode = 2
collision_mask = 3

[node name="Floor" type="CSGBox3D" parent="StaticBody3D2"]
transform = Transform3D(1, -2.42144e-08, 2.23517e-08, 3.91155e-08, 1, 0, 2.23517e-08, -1.49012e-08, 1, 0, 0, 0)
size = Vector3(10, 1, 10)
material = SubResource("StandardMaterial3D_86le5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D2"]
transform = Transform3D(1, 8.30751e-08, -5.72763e-08, 1.13225e-07, 1, -2.14204e-08, 6.17001e-08, -1.98372e-07, 1, 0, 0, 0)
shape = SubResource("BoxShape3D_i8aj4")

[connection signal="jump_begin" from="PlatformerPackage3D" to="PlatformerPackage3D/PlatformerFeetSensor" method="disable_coyote_time"]
[connection signal="jump_begin" from="PlatformerPackage3D" to="PlatformerPackage3D/AudioCenter/PlayerJumpSpeaker" method="play"]
[connection signal="body_entered" from="PlatformerPackage3D/PlatformerFeetSensor" to="PlatformerPackage3D/PlatformerFeetSensor" method="on_body_enter"]
[connection signal="body_exited" from="PlatformerPackage3D/PlatformerFeetSensor" to="PlatformerPackage3D/PlatformerFeetSensor" method="on_body_exit"]
[connection signal="fall_begin" from="PlatformerPackage3D/PlatformerFeetSensor" to="PlatformerPackage3D" method="on_fall_begin"]
[connection signal="landed" from="PlatformerPackage3D/PlatformerFeetSensor" to="PlatformerPackage3D" method="on_landed"]
[connection signal="landed" from="PlatformerPackage3D/PlatformerFeetSensor" to="PlatformerPackage3D/AudioCenter/PlayerLandSpeaker" method="play"]
